(()=>{var e={470:()=>{window.libpannellum=function(e,t,n){function o(o){function h(e,t){return 1==e.level&&1!=t.level?-1:1==t.level&&1!=e.level?1:t.timestamp-e.timestamp}function u(e,t){return e.level!=t.level?e.level-t.level:e.diff-t.diff}function d(e,t,n,o,a,i){this.vertices=e,this.side=t,this.level=n,this.x=o,this.y=a,this.path=i.replace("%s",t).replace("%l",n).replace("%x",o).replace("%y",a)}function f(e,t,n,o,a){var i;i=g(e,(l=t.vertices).slice(0,3));var r=g(e,l.slice(3,6)),s=g(e,l.slice(6,9)),l=g(e,l.slice(9,12)),c=i[0]+r[0]+s[0]+l[0];if(-4==c||4==c?i=!1:i=-4!=(c=i[1]+r[1]+s[1]+l[1])&&4!=c&&4!=i[2]+r[2]+s[2]+l[2],i){for(r=(i=t.vertices)[0]+i[3]+i[6]+i[9],s=i[1]+i[4]+i[7]+i[10],l=i[2]+i[5]+i[8]+i[11],c=Math.sqrt(r*r+s*s+l*l),l=Math.asin(l/c),r=Math.atan2(s,r)-o,r+=r>Math.PI?-2*Math.PI:r<-Math.PI?2*Math.PI:0,r=Math.abs(r),t.diff=Math.acos(Math.sin(n)*Math.sin(l)+Math.cos(n)*Math.cos(l)*Math.cos(r)),r=!1,s=0;s<w.nodeCache.length;s++)if(w.nodeCache[s].path==t.path){r=!0,w.nodeCache[s].timestamp=w.nodeCacheTimestamp++,w.nodeCache[s].diff=t.diff,w.currentNodes.push(w.nodeCache[s]);break}if(r||(t.timestamp=w.nodeCacheTimestamp++,w.currentNodes.push(t),w.nodeCache.push(t)),t.level<w.level){l=T.cubeResolution*Math.pow(2,t.level-T.maxLevel),r=Math.ceil(l*T.invTileResolution)-1,s=l%T.tileResolution*2;var h=2*l%T.tileResolution;0===h&&(h=T.tileResolution),0===s&&(s=2*T.tileResolution),c=.5,t.x!=r&&t.y!=r||(c=1-T.tileResolution/(T.tileResolution+h));var u=1-c,p=(l=[],c),m=c,v=c,y=u,b=u,x=u;for(h<T.tileResolution&&(t.x==r&&t.y!=r?(b=m=.5,("d"==t.side||"u"==t.side)&&(x=v=.5)):t.x!=r&&t.y==r&&(y=p=.5,"l"==t.side||"r"==t.side)&&(x=v=.5)),s<=T.tileResolution&&(t.x==r&&(p=0,y=1,"l"==t.side||"r"==t.side)&&(v=0,x=1),t.y==r&&(m=0,b=1,"d"==t.side||"u"==t.side)&&(v=0,x=1)),h=new d(h=[i[0],i[1],i[2],i[0]*p+i[3]*y,i[1]*c+i[4]*u,i[2]*v+i[5]*x,i[0]*p+i[6]*y,i[1]*m+i[7]*b,i[2]*v+i[8]*x,i[0]*c+i[9]*u,i[1]*m+i[10]*b,i[2]*v+i[11]*x],t.side,t.level+1,2*t.x,2*t.y,T.fullpath),l.push(h),t.x==r&&s<=T.tileResolution||(h=new d(h=[i[0]*p+i[3]*y,i[1]*c+i[4]*u,i[2]*v+i[5]*x,i[3],i[4],i[5],i[3]*c+i[6]*u,i[4]*m+i[7]*b,i[5]*v+i[8]*x,i[0]*p+i[6]*y,i[1]*m+i[7]*b,i[2]*v+i[8]*x],t.side,t.level+1,2*t.x+1,2*t.y,T.fullpath),l.push(h)),t.x==r&&s<=T.tileResolution||t.y==r&&s<=T.tileResolution||(h=new d(h=[i[0]*p+i[6]*y,i[1]*m+i[7]*b,i[2]*v+i[8]*x,i[3]*c+i[6]*u,i[4]*m+i[7]*b,i[5]*v+i[8]*x,i[6],i[7],i[8],i[9]*p+i[6]*y,i[10]*c+i[7]*u,i[11]*v+i[8]*x],t.side,t.level+1,2*t.x+1,2*t.y+1,T.fullpath),l.push(h)),t.y==r&&s<=T.tileResolution||(h=new d(h=[i[0]*c+i[9]*u,i[1]*m+i[10]*b,i[2]*v+i[11]*x,i[0]*p+i[6]*y,i[1]*m+i[7]*b,i[2]*v+i[8]*x,i[9]*p+i[6]*y,i[10]*c+i[7]*u,i[11]*v+i[8]*x,i[9],i[10],i[11]],t.side,t.level+1,2*t.x,2*t.y+1,T.fullpath),l.push(h)),t=0;t<l.length;t++)f(e,l[t],n,o,a)}}}function p(e,t,n){var o=Math.sin(t);return t=Math.cos(t),"x"==n?[e[0],t*e[1]+o*e[2],t*e[2]-o*e[1],e[3],t*e[4]+o*e[5],t*e[5]-o*e[4],e[6],t*e[7]+o*e[8],t*e[8]-o*e[7]]:"y"==n?[t*e[0]-o*e[2],e[1],t*e[2]+o*e[0],t*e[3]-o*e[5],e[4],t*e[5]+o*e[3],t*e[6]-o*e[8],e[7],t*e[8]+o*e[6]]:"z"==n?[t*e[0]+o*e[1],t*e[1]-o*e[0],e[2],t*e[3]+o*e[4],t*e[4]-o*e[3],e[5],t*e[6]+o*e[7],t*e[7]-o*e[6],e[8]]:void 0}function m(e){return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]}function v(e){U(e,e.path+"."+T.extension,(function(t,n){e.texture=t,e.textureLoaded=n?2:1}),D.crossOrigin)}function g(e,t){var n=(a=[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[4]*t[0]+e[5]*t[1]+e[6]*t[2],e[11]+e[8]*t[0]+e[9]*t[1]+e[10]*t[2],1/(e[12]*t[0]+e[13]*t[1]+e[14]*t[2])])[0]*a[3],o=a[1]*a[3],a=a[2]*a[3],i=[0,0,0];return-1>n&&(i[0]=-1),1<n&&(i[0]=1),-1>o&&(i[1]=-1),1<o&&(i[1]=1),(-1>a||1<a)&&(i[2]=1),i}function y(){console.log("Reducing canvas size due to error 1286!"),k.width=Math.round(k.width/2),k.height=Math.round(k.height/2)}var w,b,x,E,M,P,R,_,T,C,L,I,S,A,O,D,k=t.createElement("canvas");k.style.width=k.style.height="100%",o.appendChild(k),this.init=function(e,h,u,d,f,p,m,v){function g(e){if(F){var t=e*e*4,n=new Uint8ClampedArray(t),o=v.backgroundColor?v.backgroundColor:[0,0,0];o[0]*=255,o[1]*=255,o[2]*=255;for(var a=0;a<t;a++)n[a++]=o[0],n[a++]=o[1],n[a++]=o[2];for(e=new ImageData(n,e,e),N=0;6>N;N++)0==T[N].width&&(T[N]=e)}}if(h===n&&(h="equirectangular"),"equirectangular"!=h&&"cubemap"!=h&&"multires"!=h)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(C=h,T=e,L=u,D=v||{},w){if(x&&(b.detachShader(w,x),b.deleteShader(x)),E&&(b.detachShader(w,E),b.deleteShader(E)),b.bindBuffer(b.ARRAY_BUFFER,null),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null),w.texture&&b.deleteTexture(w.texture),w.nodeCache)for(e=0;e<w.nodeCache.length;e++)b.deleteTexture(w.nodeCache[e].texture);b.deleteProgram(w),w=n}_=n;var N,U,F=!1;if("cubemap"==C)for(N=0;6>N;N++)0<T[N].width?(U===n&&(U=T[N].width),U!=T[N].width&&console.log("Cube faces have inconsistent widths: "+U+" vs. "+T[N].width)):F=!0;if("cubemap"==C&&0!=(U&U-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(b||(b=k.getContext("experimental-webgl",{alpha:!1,depth:!1})),b&&1286==b.getError()&&y()),!b&&("multires"==C&&T.hasOwnProperty("fallbackPath")||"cubemap"==C)&&("WebkitAppearance"in t.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){P&&o.removeChild(P),(P=t.createElement("div")).className="pnlm-world",d=T.basePath?T.basePath+T.fallbackPath:T.fallbackPath;var B="frblud".split(""),z=0;f=function(){var e=t.createElement("canvas");e.className="pnlm-face pnlm-"+B[this.side]+"face",P.appendChild(e);var n=e.getContext("2d");e.style.width=this.width+4+"px",e.style.height=this.height+4+"px",e.width=this.width+4,e.height=this.height+4,n.drawImage(this,2,2);var o,a,i=n.getImageData(0,0,e.width,e.height),r=i.data;for(o=2;o<e.width-2;o++)for(a=0;4>a;a++)r[4*(o+e.width)+a]=r[4*(o+2*e.width)+a],r[4*(o+e.width*(e.height-2))+a]=r[4*(o+e.width*(e.height-3))+a];for(o=2;o<e.height-2;o++)for(a=0;4>a;a++)r[4*(o*e.width+1)+a]=r[4*(o*e.width+2)+a],r[4*((o+1)*e.width-2)+a]=r[4*((o+1)*e.width-3)+a];for(a=0;4>a;a++)r[4*(e.width+1)+a]=r[4*(2*e.width+2)+a],r[4*(2*e.width-2)+a]=r[4*(3*e.width-3)+a],r[4*(e.width*(e.height-2)+1)+a]=r[4*(e.width*(e.height-3)+2)+a],r[4*(e.width*(e.height-1)-2)+a]=r[4*(e.width*(e.height-2)-3)+a];for(o=1;o<e.width-1;o++)for(a=0;4>a;a++)r[4*o+a]=r[4*(o+e.width)+a],r[4*(o+e.width*(e.height-1))+a]=r[4*(o+e.width*(e.height-2))+a];for(o=1;o<e.height-1;o++)for(a=0;4>a;a++)r[o*e.width*4+a]=r[4*(o*e.width+1)+a],r[4*((o+1)*e.width-1)+a]=r[4*((o+1)*e.width-2)+a];for(a=0;4>a;a++)r[a]=r[4*(e.width+1)+a],r[4*(e.width-1)+a]=r[4*(2*e.width-2)+a],r[e.width*(e.height-1)*4+a]=r[4*(e.width*(e.height-2)+1)+a],r[4*(e.width*e.height-1)+a]=r[4*(e.width*(e.height-1)-2)+a];n.putImageData(i,0,0),H.call(this)};var H=function(){0<this.width?(M===n&&(M=this.width),M!=this.width&&console.log("Fallback faces have inconsistent widths: "+M+" vs. "+this.width)):F=!0,6==++z&&(M=this.width,o.appendChild(P),m())};F=!1;for(N=0;6>N;N++)(p=new Image).crossOrigin=D.crossOrigin?D.crossOrigin:"anonymous",p.side=N,p.onload=f,p.onerror=H,p.src="multires"==C?d.replace("%s",B[N])+"."+T.extension:T[N].src;g(M)}else{if(!b)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};for("cubemap"==C&&g(U),T.fullpath=T.basePath?T.basePath+T.path:T.path,T.invTileResolution=1/T.tileResolution,e=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1],R=[],N=0;6>N;N++)R[N]=e.slice(12*N,12*N+12),e=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];if(e=0,"equirectangular"==C){if(e=b.getParameter(b.MAX_TEXTURE_SIZE),Math.max(T.width/2,T.height)>e)throw console.log("Error: The image is too big; it's "+T.width+"px wide, but this device's maximum supported size is "+2*e+"px."),{type:"webgl size error",width:T.width,maxWidth:2*e}}else if("cubemap"==C&&U>b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+U+"px wide, but this device's maximum supported size is "+e+"px."),{type:"webgl size error",width:U,maxWidth:e};if(v===n||v.horizonPitch===n&&v.horizonRoll===n||(_=[v.horizonPitch==n?0:v.horizonPitch,v.horizonRoll==n?0:v.horizonRoll]),U=b.TEXTURE_2D,b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight),b.getShaderPrecisionFormat&&(h=b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT))&&1>h.precision&&(r=r.replace("highp","mediump")),x=b.createShader(b.VERTEX_SHADER),h=a,"multires"==C&&(h=i),b.shaderSource(x,h),b.compileShader(x),E=b.createShader(b.FRAGMENT_SHADER),h=l,"cubemap"==C?(U=b.TEXTURE_CUBE_MAP,h=s):"multires"==C&&(h=c),b.shaderSource(E,h),b.compileShader(E),w=b.createProgram(),b.attachShader(w,x),b.attachShader(w,E),b.linkProgram(w),b.getShaderParameter(x,b.COMPILE_STATUS)||console.log(b.getShaderInfoLog(x)),b.getShaderParameter(E,b.COMPILE_STATUS)||console.log(b.getShaderInfoLog(E)),b.getProgramParameter(w,b.LINK_STATUS)||console.log(b.getProgramInfoLog(w)),b.useProgram(w),w.drawInProgress=!1,h=v.backgroundColor?v.backgroundColor:[0,0,0],b.clearColor(h[0],h[1],h[2],1),b.clear(b.COLOR_BUFFER_BIT),w.texCoordLocation=b.getAttribLocation(w,"a_texCoord"),b.enableVertexAttribArray(w.texCoordLocation),"multires"!=C?(I||(I=b.createBuffer()),b.bindBuffer(b.ARRAY_BUFFER,I),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),b.STATIC_DRAW),b.vertexAttribPointer(w.texCoordLocation,2,b.FLOAT,!1,0,0),w.aspectRatio=b.getUniformLocation(w,"u_aspectRatio"),b.uniform1f(w.aspectRatio,b.drawingBufferWidth/b.drawingBufferHeight),w.psi=b.getUniformLocation(w,"u_psi"),w.theta=b.getUniformLocation(w,"u_theta"),w.f=b.getUniformLocation(w,"u_f"),w.h=b.getUniformLocation(w,"u_h"),w.v=b.getUniformLocation(w,"u_v"),w.vo=b.getUniformLocation(w,"u_vo"),w.rot=b.getUniformLocation(w,"u_rot"),b.uniform1f(w.h,d/(2*Math.PI)),b.uniform1f(w.v,f/Math.PI),b.uniform1f(w.vo,p/Math.PI*2),"equirectangular"==C&&(w.backgroundColor=b.getUniformLocation(w,"u_backgroundColor"),b.uniform4fv(w.backgroundColor,h.concat([1]))),w.texture=b.createTexture(),b.bindTexture(U,w.texture),"cubemap"==C?(b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T[1]),b.texImage2D(b.TEXTURE_CUBE_MAP_NEGATIVE_X,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T[3]),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_Y,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T[4]),b.texImage2D(b.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T[5]),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_Z,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T[0]),b.texImage2D(b.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T[2])):T.width<=e?(b.uniform1i(b.getUniformLocation(w,"u_splitImage"),0),b.texImage2D(U,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T)):(b.uniform1i(b.getUniformLocation(w,"u_splitImage"),1),(d=t.createElement("canvas")).width=T.width/2,d.height=T.height,(d=d.getContext("2d")).drawImage(T,0,0),f=d.getImageData(0,0,T.width/2,T.height),b.texImage2D(U,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,f),w.texture2=b.createTexture(),b.activeTexture(b.TEXTURE1),b.bindTexture(U,w.texture2),b.uniform1i(b.getUniformLocation(w,"u_image1"),1),d.drawImage(T,-T.width/2,0),f=d.getImageData(0,0,T.width/2,T.height),b.texImage2D(U,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,f),b.texParameteri(U,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(U,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(U,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(U,b.TEXTURE_MAG_FILTER,b.LINEAR),b.activeTexture(b.TEXTURE0)),b.texParameteri(U,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(U,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(U,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(U,b.TEXTURE_MAG_FILTER,b.LINEAR)):(w.vertPosLocation=b.getAttribLocation(w,"a_vertCoord"),b.enableVertexAttribArray(w.vertPosLocation),S||(S=b.createBuffer()),A||(A=b.createBuffer()),O||(O=b.createBuffer()),b.bindBuffer(b.ARRAY_BUFFER,A),b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,O),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),b.STATIC_DRAW),w.perspUniform=b.getUniformLocation(w,"u_perspMatrix"),w.cubeUniform=b.getUniformLocation(w,"u_cubeMatrix"),w.level=-1,w.currentNodes=[],w.nodeCache=[],w.nodeCacheTimestamp=0),0!==(d=b.getError()))throw console.log("Error: Something went wrong with WebGL!",d),{type:"webgl error"};m()}},this.destroy=function(){if(o!==n&&(k!==n&&o.contains(k)&&o.removeChild(k),P!==n&&o.contains(P)&&o.removeChild(P)),b){var e=b.getExtension("WEBGL_lose_context");e&&e.loseContext()}},this.resize=function(){var t=e.devicePixelRatio||1;k.width=k.clientWidth*t,k.height=k.clientHeight*t,b&&(1286==b.getError()&&y(),b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight),"multires"!=C&&b.uniform1f(w.aspectRatio,k.clientWidth/k.clientHeight))},this.resize(),this.setPose=function(e,t){_=[e,t]},this.render=function(e,t,o,a){var i,r=0;if(a===n&&(a={}),a.roll&&(r=a.roll),_!==n){i=_[0];var s=_[1],l=e,c=t,g=Math.cos(s)*Math.sin(e)*Math.sin(i)+Math.cos(e)*(Math.cos(i)*Math.cos(t)+Math.sin(s)*Math.sin(i)*Math.sin(t)),y=-Math.sin(e)*Math.sin(s)+Math.cos(e)*Math.cos(s)*Math.sin(t);e=Math.cos(s)*Math.cos(i)*Math.sin(e)+Math.cos(e)*(-Math.cos(t)*Math.sin(i)+Math.cos(i)*Math.sin(s)*Math.sin(t)),e=Math.asin(Math.max(Math.min(e,1),-1)),t=Math.atan2(y,g),i=[Math.cos(l)*(Math.sin(s)*Math.sin(i)*Math.cos(c)-Math.cos(i)*Math.sin(c)),Math.cos(l)*Math.cos(s)*Math.cos(c),Math.cos(l)*(Math.cos(i)*Math.sin(s)*Math.cos(c)+Math.sin(c)*Math.sin(i))],s=[-Math.cos(e)*Math.sin(t),Math.cos(e)*Math.cos(t)],s=Math.acos(Math.max(Math.min((i[0]*s[0]+i[1]*s[1])/(Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2])*Math.sqrt(s[0]*s[0]+s[1]*s[1])),1),-1)),0>i[2]&&(s=2*Math.PI-s),r+=s}if(b||"multires"!=C&&"cubemap"!=C){if("multires"!=C)o=2*Math.atan(Math.tan(.5*o)/(b.drawingBufferWidth/b.drawingBufferHeight)),o=1/Math.tan(.5*o),b.uniform1f(w.psi,t),b.uniform1f(w.theta,e),b.uniform1f(w.rot,r),b.uniform1f(w.f,o),!0===L&&"equirectangular"==C&&(b.bindTexture(b.TEXTURE_2D,w.texture),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,T)),b.drawArrays(b.TRIANGLES,0,6);else{for(i=b.drawingBufferWidth/b.drawingBufferHeight,s=2*Math.atan(Math.tan(o/2)*b.drawingBufferHeight/b.drawingBufferWidth),i=[(s=1/Math.tan(s/2))/i,0,0,0,0,s,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0],s=1;s<T.maxLevel&&b.drawingBufferWidth>T.tileResolution*Math.pow(2,s-1)*Math.tan(o/2)*.707;)s++;if(w.level=s,s=p(s=[1,0,0,0,1,0,0,0,1],-r,"z"),s=p(s,-e,"x"),s=[(s=p(s,t,"y"))[0],s[1],s[2],0,s[3],s[4],s[5],0,s[6],s[7],s[8],0,0,0,0,1],b.uniformMatrix4fv(w.perspUniform,!1,new Float32Array(m(i))),b.uniformMatrix4fv(w.cubeUniform,!1,new Float32Array(m(s))),r=[i[0]*s[0],i[0]*s[1],i[0]*s[2],0,i[5]*s[4],i[5]*s[5],i[5]*s[6],0,i[10]*s[8],i[10]*s[9],i[10]*s[10],i[11],-s[8],-s[9],-s[10],0],w.nodeCache.sort(h),200<w.nodeCache.length&&w.nodeCache.length>w.currentNodes.length+50)for(i=w.nodeCache.splice(200,w.nodeCache.length-200),s=0;s<i.length;s++)b.deleteTexture(i[s].texture);for(w.currentNodes=[],s="fbudlr".split(""),i=0;6>i;i++)f(r,l=new d(R[i],s[i],1,0,0,T.fullpath),e,t,o);for(w.currentNodes.sort(u),e=N.length-1;0<=e;e--)-1===w.currentNodes.indexOf(N[e].node)&&(N[e].node.textureLoad=!1,N.splice(e,1));if(0===N.length)for(e=0;e<w.currentNodes.length;e++)if(!(t=w.currentNodes[e]).texture&&!t.textureLoad){t.textureLoad=!0,setTimeout(v,0,t);break}if(!w.drawInProgress){for(w.drawInProgress=!0,b.clear(b.COLOR_BUFFER_BIT),e=0;e<w.currentNodes.length;e++)1<w.currentNodes[e].textureLoaded&&(b.bindBuffer(b.ARRAY_BUFFER,S),b.bufferData(b.ARRAY_BUFFER,new Float32Array(w.currentNodes[e].vertices),b.STATIC_DRAW),b.vertexAttribPointer(w.vertPosLocation,3,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,A),b.vertexAttribPointer(w.texCoordLocation,2,b.FLOAT,!1,0,0),b.bindTexture(b.TEXTURE_2D,w.currentNodes[e].texture),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0));w.drawInProgress=!1}}if(a.returnImage!==n)return k.toDataURL("image/png")}else for(a={f:"translate3d(-"+((i=M/2)+2)+"px, -"+(i+2)+"px, -"+i+"px)",b:"translate3d("+(i+2)+"px, -"+(i+2)+"px, "+i+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(i+2)+"px, -"+i+"px, "+(i+2)+"px) rotateX(270deg)",d:"translate3d(-"+(i+2)+"px, "+i+"px, -"+(i+2)+"px) rotateX(90deg)",l:"translate3d(-"+i+"px, -"+(i+2)+"px, "+(i+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+i+"px, -"+(i+2)+"px, -"+(i+2)+"px) rotateY(270deg)"},t="perspective("+(o=(o=1/Math.tan(o/2))*k.clientWidth/2+"px")+") translateZ("+o+") rotateX("+e+"rad) rotateY("+t+"rad) ",o=Object.keys(a),e=0;6>e;e++)(r=P.querySelector(".pnlm-"+o[e]+"face"))&&(r.style.webkitTransform=t+a[o[e]],r.style.transform=t+a[o[e]])},this.isLoading=function(){if(b&&"multires"==C)for(var e=0;e<w.currentNodes.length;e++)if(!w.currentNodes[e].textureLoaded)return!0;return!1},this.getCanvas=function(){return k};var N=[],U=function(){function e(){var e=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=n||"anonymous";var t=function(){if(0<e.image.width&&0<e.image.height){var t=e.image;b.bindTexture(b.TEXTURE_2D,e.texture),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,t),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),e.callback(e.texture,!0)}else e.callback(e.texture,!1);N.length?(t=N.shift(),e.loadTexture(t.src,t.texture,t.callback)):a[o++]=e};this.image.addEventListener("load",t),this.image.addEventListener("error",t)}function t(e,t,n,o){this.node=e,this.src=t,this.texture=n,this.callback=o}var n,o=4,a={};e.prototype.loadTexture=function(e,t,n){this.texture=t,this.callback=n,this.image.src=e};for(var i=0;i<o;i++)a[i]=new e;return function(e,i,r,s){return n=s,s=b.createTexture(),o?a[--o].loadTexture(i,s,r):N.push(new t(e,i,s,r)),s}}()}var a="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",i="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",r="precision highp float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nuniform bool u_splitImage;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);",s=r+"float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",l=r+"lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse {\nif(u_splitImage) {\nif(coord.x < 0.0)\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\nelse\ngl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n} else {\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}\n}\n}",c="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(e,t,n,a){return new o(e,t,n,a)}}}(window,document),window.pannellum=function(e,t,n){function o(o,a){function i(){if((h=t.createElement("div")).innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1==h.getElementsByTagName("i").length)l();else{var o;if(ne=V.hfov,oe=V.pitch,"cubemap"==V.type){for(Q=[],h=0;6>h;h++)Q.push(new Image),Q[h].crossOrigin=V.crossOrigin;Ae.load.lbox.style.display="block",Ae.load.lbar.style.display="none"}else if("multires"==V.type)h=JSON.parse(JSON.stringify(V.multiRes)),V.basePath&&V.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(V.multiRes.basePath)?h.basePath=V.basePath+V.multiRes.basePath:V.multiRes.basePath?h.basePath=V.multiRes.basePath:V.basePath&&(h.basePath=V.basePath),Q=h;else if(!0===V.dynamic)Q=V.panorama;else{if(V.panorama===n)return void l(V.strings.noPanoramaError);Q=new Image}if("cubemap"==V.type)for(var a=6,i=function(){0===--a&&s()},c=function(e){var n=t.createElement("a");n.href=e.target.src,n.textContent=n.href,l(V.strings.fileAccessError.replace("%s",n.outerHTML))},h=0;h<Q.length;h++)"null"==(o=V.cubeMap[h])?(console.log("Will use background instead of missing cubemap face "+h),i()):(V.basePath&&!r(o)&&(o=V.basePath+o),Q[h].onload=i,Q[h].onerror=c,Q[h].src=j(o));else if("multires"==V.type)s();else if(o="",V.basePath&&(o=V.basePath),!0!==V.dynamic){o=r(V.panorama)?V.panorama:o+V.panorama,Q.onload=function(){e.URL.revokeObjectURL(this.src),s()};var u=new XMLHttpRequest;u.onloadend=function(){if(200!=u.status){var a=t.createElement("a");a.href=o,a.textContent=a.href,l(V.strings.fileAccessError.replace("%s",a.outerHTML))}!function(t){var o=new FileReader;o.addEventListener("loadend",(function(){var a=o.result;navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)&&((0>(r=a.indexOf("ÿÂ"))||65536<r)&&l(V.strings.iOS8WebGLError));if(-1<(r=a.indexOf("<x:xmpmeta"))&&!0!==V.ignoreGPanoXMP){var i=a.substring(r,a.indexOf("</x:xmpmeta>")+12),r=(a=(f=function(e){var t;return 0<=i.indexOf(e+'="')?t=(t=i.substring(i.indexOf(e+'="')+e.length+2)).substring(0,t.indexOf('"')):0<=i.indexOf(e+">")&&(t=(t=i.substring(i.indexOf(e+">")+e.length+1)).substring(0,t.indexOf("<"))),t!==n?Number(t):null})("GPano:FullPanoWidthPixels"),f("GPano:CroppedAreaImageWidthPixels")),s=f("GPano:FullPanoHeightPixels"),c=f("GPano:CroppedAreaImageHeightPixels"),h=f("GPano:CroppedAreaTopPixels"),u=f("GPano:PoseHeadingDegrees"),d=f("GPano:PosePitchDegrees"),f=f("GPano:PoseRollDegrees");null!==a&&null!==r&&null!==s&&null!==c&&null!==h&&(0>Me.indexOf("haov")&&(V.haov=r/a*360),0>Me.indexOf("vaov")&&(V.vaov=c/s*180),0>Me.indexOf("vOffset")&&(V.vOffset=-180*((h+c/2)/s-.5)),null!==u&&0>Me.indexOf("northOffset")&&(V.northOffset=u,!1!==V.compass&&(V.compass=!0)),null!==d&&null!==f&&(0>Me.indexOf("horizonPitch")&&(V.horizonPitch=d),0>Me.indexOf("horizonRoll")&&(V.horizonRoll=f)))}Q.src=e.URL.createObjectURL(t)})),o.readAsBinaryString!==n?o.readAsBinaryString(t):o.readAsText(t)}(this.response),Ae.load.msg.innerHTML=""},u.onprogress=function(e){var t,n;e.lengthComputable?(Ae.load.lbarFill.style.width=e.loaded/e.total*100+"%",1e6<e.total?(t="MB",n=(e.loaded/1e6).toFixed(2),e=(e.total/1e6).toFixed(2)):1e3<e.total?(t="kB",n=(e.loaded/1e3).toFixed(1),e=(e.total/1e3).toFixed(1)):(t="B",n=e.loaded,e=e.total),Ae.load.msg.innerHTML=n+" / "+e+" "+t):(Ae.load.lbox.style.display="block",Ae.load.lbar.style.display="none")};try{u.open("GET",o,!0)}catch(e){l(V.strings.malformedURLError)}u.responseType="blob",u.setRequestHeader("Accept","image/*,*/*;q=0.9"),u.withCredentials="use-credentials"===V.crossOrigin,u.send()}V.draggable&&Ce.classList.add("pnlm-grab"),Ce.classList.remove("pnlm-grabbing"),Pe=!0===V.dynamicUpdate,V.dynamic&&Pe&&(Q=V.panorama,s())}}function r(e){return/^(?:[a-z]+:)?\/\//i.test(e)||"/"==e[0]||"blob:"==e.slice(0,5)}function s(){K||(K=new libpannellum.renderer(Le)),me||(me=!0,Ie.addEventListener("mousedown",h,!1),t.addEventListener("mousemove",f,!1),t.addEventListener("mouseup",p,!1),V.mouseZoom&&(Ce.addEventListener("mousewheel",x,!1),Ce.addEventListener("DOMMouseScroll",x,!1)),V.doubleClickZoom&&Ie.addEventListener("dblclick",u,!1),o.addEventListener("mozfullscreenchange",F,!1),o.addEventListener("webkitfullscreenchange",F,!1),o.addEventListener("msfullscreenchange",F,!1),o.addEventListener("fullscreenchange",F,!1),e.addEventListener("resize",T,!1),e.addEventListener("orientationchange",T,!1),V.disableKeyboardCtrl||(o.addEventListener("keydown",E,!1),o.addEventListener("keyup",P,!1),o.addEventListener("blur",M,!1)),t.addEventListener("mouseleave",p,!1),""===t.documentElement.style.pointerAction&&""===t.documentElement.style.touchAction?(Ie.addEventListener("pointerdown",y,!1),Ie.addEventListener("pointermove",w,!1),Ie.addEventListener("pointerup",b,!1),Ie.addEventListener("pointerleave",b,!1)):(Ie.addEventListener("touchstart",m,!1),Ie.addEventListener("touchmove",v,!1),Ie.addEventListener("touchend",g,!1)),e.navigator.pointerEnabled&&(o.style.touchAction="none")),function(){try{var e={};V.horizonPitch!==n&&(e.horizonPitch=V.horizonPitch*Math.PI/180),V.horizonRoll!==n&&(e.horizonRoll=V.horizonRoll*Math.PI/180),V.backgroundColor!==n&&(e.backgroundColor=V.backgroundColor),K.init(Q,V.type,V.dynamic,V.haov*Math.PI/180,V.vaov*Math.PI/180,V.vOffset*Math.PI/180,A,e),!0!==V.dynamic&&(Q=n)}catch(e){if("webgl error"==e.type||"no webgl"==e.type)l();else{if("webgl size error"!=e.type)throw l(V.strings.unknownError),e;l(V.strings.textureSizeError.replace("%s",e.width).replace("%s",e.maxWidth))}}}(),z(V.hfov),setTimeout((function(){}),500)}function l(e){e===n&&(e=V.strings.genericWebGLError),Ae.errorMsg.innerHTML="<p>"+e+"</p>",De.load.style.display="none",Ae.load.box.style.display="none",Ae.errorMsg.style.display="table",pe=!0,$=n,Le.style.display="none",Z("error",e)}function c(e){var t=o.getBoundingClientRect(),n={};return n.x=(e.clientX||e.pageX)-t.left,n.y=(e.clientY||e.pageY)-t.top,n}function h(e){if(e.preventDefault(),o.focus(),$&&V.draggable){var t=c(e);if(V.hotSpotDebug){var n=d(e);console.log("Pitch: "+n[0]+", Yaw: "+n[1]+", Center Pitch: "+V.pitch+", Center Yaw: "+V.yaw+", HFOV: "+V.hfov)}H(),X(),V.roll=0,ve.hfov=0,ie=!0,re=Date.now(),se=t.x,le=t.y,he=V.yaw,ue=V.pitch,Ce.classList.add("pnlm-grabbing"),Ce.classList.remove("pnlm-grab"),Z("mousedown",e),C()}}function u(e){V.minHfov===V.hfov?ae.setHfov(ne,1e3):(e=d(e),ae.lookAt(e[0],e[1],V.minHfov,1e3))}function d(e){var t=c(e),n=(e=K.getCanvas()).clientWidth,o=e.clientHeight;e=t.x/n*2-1;o=(1-t.y/o*2)*o/n;var a=1/Math.tan(V.hfov*Math.PI/360),i=Math.sin(V.pitch*Math.PI/180),r=Math.cos(V.pitch*Math.PI/180);t=a*r-o*i,n=Math.sqrt(e*e+t*t),o=180*Math.atan((o*r+a*i)/n)/Math.PI;return-180>(e=180*Math.atan2(e/n,t/n)/Math.PI+V.yaw)&&(e+=360),180<e&&(e-=360),[o,e]}function f(e){if(ie&&$){re=Date.now();var t=(n=K.getCanvas()).clientWidth,n=n.clientHeight;e=c(e);var o=180*(Math.atan(se/t*2-1)-Math.atan(e.x/t*2-1))/Math.PI*V.hfov/90+he;ve.yaw=(o-V.yaw)%360*.2,V.yaw=o,t=360*Math.atan(Math.tan(V.hfov/360*Math.PI)*n/t)/Math.PI,t=180*(Math.atan(e.y/n*2-1)-Math.atan(le/n*2-1))/Math.PI*t/90+ue,ve.pitch=.2*(t-V.pitch),V.pitch=t}}function p(e){ie&&(ie=!1,15<Date.now()-re&&(ve.pitch=ve.yaw=0),Ce.classList.add("pnlm-grab"),Ce.classList.remove("pnlm-grabbing"),re=Date.now(),Z("mouseup",e))}function m(e){if($&&V.draggable){H(),X(),V.roll=0,ve.hfov=0;var t=c(e.targetTouches[0]);if(se=t.x,le=t.y,2==e.targetTouches.length){var n=c(e.targetTouches[1]);se+=.5*(n.x-t.x),le+=.5*(n.y-t.y),ce=Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))}ie=!0,re=Date.now(),he=V.yaw,ue=V.pitch,Z("touchstart",e),C()}}function v(e){if(V.draggable&&(e.preventDefault(),$&&(re=Date.now()),ie&&$)){var t=c(e.targetTouches[0]),n=t.x,o=t.y;2==e.targetTouches.length&&-1!=ce&&(n+=.5*((e=c(e.targetTouches[1])).x-t.x),o+=.5*(e.y-t.y),t=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),z(V.hfov+.1*(ce-t)),ce=t),t=V.hfov/360*V.touchPanSpeedCoeffFactor,n=(se-n)*t+he,ve.yaw=(n-V.yaw)%360*.2,V.yaw=n,o=(o-le)*t+ue,ve.pitch=.2*(o-V.pitch),V.pitch=o}}function g(){ie=!1,150<Date.now()-re&&(ve.pitch=ve.yaw=0),ce=-1,re=Date.now(),Z("touchend",event)}function y(e){"touch"==e.pointerType&&$&&V.draggable&&(Ue.push(e.pointerId),Fe.push({clientX:e.clientX,clientY:e.clientY}),e.targetTouches=Fe,m(e),e.preventDefault())}function w(e){if("touch"==e.pointerType&&V.draggable)for(var t=0;t<Ue.length;t++)if(e.pointerId==Ue[t]){Fe[t].clientX=e.clientX,Fe[t].clientY=e.clientY,e.targetTouches=Fe,v(e),e.preventDefault();break}}function b(e){if("touch"==e.pointerType){for(var t=!1,o=0;o<Ue.length;o++)e.pointerId==Ue[o]&&(Ue[o]=n),Ue[o]&&(t=!0);t||(Ue=[],Fe=[],g()),e.preventDefault()}}function x(e){$&&("fullscreenonly"!=V.mouseZoom||fe)&&(e.preventDefault(),H(),re=Date.now(),e.wheelDeltaY?(z(V.hfov-.05*e.wheelDeltaY),ve.hfov=0>e.wheelDelta?1:-1):e.wheelDelta?(z(V.hfov-.05*e.wheelDelta),ve.hfov=0>e.wheelDelta?1:-1):e.detail&&(z(V.hfov+1.5*e.detail),ve.hfov=0<e.detail?1:-1),C())}function E(e){H(),re=Date.now(),X(),V.roll=0;var t=e.which||e.keycode;0>V.capturedKeyNumbers.indexOf(t)||(e.preventDefault(),27==t?fe&&U():R(t,!0))}function M(){for(var e=0;10>e;e++)de[e]=!1}function P(e){var t=e.which||e.keycode;0>V.capturedKeyNumbers.indexOf(t)||(e.preventDefault(),R(t,!1))}function R(e,t){var n=!1;switch(e){case 109:case 189:case 17:case 173:de[0]!=t&&(n=!0),de[0]=t;break;case 107:case 187:case 16:case 61:de[1]!=t&&(n=!0),de[1]=t;break;case 38:de[2]!=t&&(n=!0),de[2]=t;break;case 87:de[6]!=t&&(n=!0),de[6]=t;break;case 40:de[3]!=t&&(n=!0),de[3]=t;break;case 83:de[7]!=t&&(n=!0),de[7]=t;break;case 37:de[4]!=t&&(n=!0),de[4]=t;break;case 65:de[8]!=t&&(n=!0),de[8]=t;break;case 39:de[5]!=t&&(n=!0),de[5]=t;break;case 68:de[9]!=t&&(n=!0),de[9]=t}n&&t&&(ee="undefined"!=typeof performance&&performance.now()?performance.now():Date.now(),C())}function _(e){var t=xe[e],n=Math.min(1,Math.max((Date.now()-t.startTime)/1e3/(t.duration/1e3),0));n=t.startPosition+V.animationTimingFunction(n)*(t.endPosition-t.startPosition);(t.endPosition>t.startPosition&&n>=t.endPosition||t.endPosition<t.startPosition&&n<=t.endPosition||t.endPosition===t.startPosition)&&(n=t.endPosition,ve[e]=0,delete xe[e]),V[e]=n}function T(){F("resize")}function C(){ge||(ge=!0,L())}function L(){if(!_e)if(function(){var e;if($){var t=K.getCanvas();!1!==V.autoRotate&&(360<V.yaw?V.yaw-=360:-360>V.yaw&&(V.yaw+=360)),e=V.yaw;var o=0;if(V.avoidShowingBackground){var a=V.hfov/2,i=180*Math.atan2(Math.tan(a/180*Math.PI),t.width/t.height)/Math.PI;V.vaov>V.haov?Math.min(Math.cos((V.pitch-a)/180*Math.PI),Math.cos((V.pitch+a)/180*Math.PI)):o=a*(1-Math.min(Math.cos((V.pitch-i)/180*Math.PI),Math.cos((V.pitch+i)/180*Math.PI)))}i=-180;var r=180;360>(a=V.maxYaw-V.minYaw)&&(i=V.minYaw+V.hfov/2+o,r=V.maxYaw-V.hfov/2-o,a<V.hfov&&(i=r=(i+r)/2),V.yaw=Math.max(i,Math.min(r,V.yaw))),!1===V.autoRotate&&(360<V.yaw?V.yaw-=360:-360>V.yaw&&(V.yaw+=360)),!1!==V.autoRotate&&e!=V.yaw&&ee!==n&&(V.autoRotate*=-1),e=2*Math.atan(Math.tan(V.hfov/180*Math.PI*.5)/(t.width/t.height))/Math.PI*180,t=V.minPitch+e/2,o=V.maxPitch-e/2,V.maxPitch-V.minPitch<e&&(t=o=(t+o)/2),isNaN(t)&&(t=-90),isNaN(o)&&(o=90),V.pitch=Math.max(t,Math.min(o,V.pitch)),K.render(V.pitch*Math.PI/180,V.yaw*Math.PI/180,V.hfov*Math.PI/180,{roll:V.roll*Math.PI/180}),V.hotSpots.forEach(D),V.compass&&(Ne.style.transform="rotate("+(-V.yaw-V.northOffset)+"deg)",Ne.style.webkitTransform="rotate("+(-V.yaw-V.northOffset)+"deg)")}}(),te&&clearTimeout(te),ie||!0===ye)requestAnimationFrame(L);else if(de[0]||de[1]||de[2]||de[3]||de[4]||de[5]||de[6]||de[7]||de[8]||de[9]||V.autoRotate||xe.pitch||xe.yaw||xe.hfov||.01<Math.abs(ve.yaw)||.01<Math.abs(ve.pitch)||.01<Math.abs(ve.hfov))(function(){if($){var e,t=!1,o=V.pitch,a=V.yaw,i=V.hfov;e="undefined"!=typeof performance&&performance.now()?performance.now():Date.now(),ee===n&&(ee=e);var r=(e-ee)*V.hfov/1700;if(r=Math.min(r,1),de[0]&&!0===V.keyboardZoom&&(z(V.hfov+(.8*ve.hfov+.5)*r),t=!0),de[1]&&!0===V.keyboardZoom&&(z(V.hfov+(.8*ve.hfov-.2)*r),t=!0),(de[2]||de[6])&&(V.pitch+=(.8*ve.pitch+.2)*r,t=!0),(de[3]||de[7])&&(V.pitch+=(.8*ve.pitch-.2)*r,t=!0),(de[4]||de[8])&&(V.yaw+=(.8*ve.yaw-.2)*r,t=!0),(de[5]||de[9])&&(V.yaw+=(.8*ve.yaw+.2)*r,t=!0),t&&(re=Date.now()),V.autoRotate){if(.001<e-ee){t=(e-ee)/1e3;var s=(ve.yaw/t*r-.2*V.autoRotate)*t;s=(0<-V.autoRotate?1:-1)*Math.min(Math.abs(V.autoRotate*t),Math.abs(s)),V.yaw+=s}V.autoRotateStopDelay&&(V.autoRotateStopDelay-=e-ee,0>=V.autoRotateStopDelay&&(V.autoRotateStopDelay=!1,be=V.autoRotate,V.autoRotate=0))}xe.pitch&&(_("pitch"),o=V.pitch),xe.yaw&&(_("yaw"),a=V.yaw),xe.hfov&&(_("hfov"),i=V.hfov),0<r&&!V.autoRotate&&(t=1-V.friction,de[4]||de[5]||de[8]||de[9]||xe.yaw||(V.yaw+=ve.yaw*r*t),de[2]||de[3]||de[6]||de[7]||xe.pitch||(V.pitch+=ve.pitch*r*t),de[0]||de[1]||xe.hfov||z(V.hfov+ve.hfov*r*t)),ee=e,0<r&&(ve.yaw=.8*ve.yaw+(V.yaw-a)/r*.2,ve.pitch=.8*ve.pitch+(V.pitch-o)/r*.2,ve.hfov=.8*ve.hfov+(V.hfov-i)/r*.2,o=V.autoRotate?Math.abs(V.autoRotate):5,ve.yaw=Math.min(o,Math.max(ve.yaw,-o)),ve.pitch=Math.min(o,Math.max(ve.pitch,-o)),ve.hfov=Math.min(o,Math.max(ve.hfov,-o))),de[0]&&de[1]&&(ve.hfov=0),(de[2]||de[6])&&(de[3]||de[7])&&(ve.pitch=0),(de[4]||de[8])&&(de[5]||de[9])&&(ve.yaw=0)}})(),0<=V.autoRotateInactivityDelay&&be&&Date.now()-re>V.autoRotateInactivityDelay&&!V.autoRotate&&(V.autoRotate=be,ae.lookAt(oe,n,ne,3e3)),requestAnimationFrame(L);else if(K&&(K.isLoading()||!0===V.dynamic&&Pe))requestAnimationFrame(L);else{Z("animatefinished",{pitch:ae.getPitch(),yaw:ae.getYaw(),hfov:ae.getHfov()}),ge=!1,ee=n;var e=V.autoRotateInactivityDelay-(Date.now()-re);0<e?te=setTimeout((function(){V.autoRotate=be,ae.lookAt(oe,n,ne,3e3),C()}),e):0<=V.autoRotateInactivityDelay&&be&&(V.autoRotate=be,ae.lookAt(oe,n,ne,3e3),C())}}function I(e,t,n,o){this.w=e,this.x=t,this.y=n,this.z=o}function S(t){var n;n=t.alpha;var o=t.beta;t=t.gamma,o=[o?o*Math.PI/180/2:0,t?t*Math.PI/180/2:0,n?n*Math.PI/180/2:0],n=[Math.cos(o[0]),Math.cos(o[1]),Math.cos(o[2])],o=[Math.sin(o[0]),Math.sin(o[1]),Math.sin(o[2])],n=(n=new I(n[0]*n[1]*n[2]-o[0]*o[1]*o[2],o[0]*n[1]*n[2]-n[0]*o[1]*o[2],n[0]*o[1]*n[2]+o[0]*n[1]*o[2],n[0]*n[1]*o[2]+o[0]*o[1]*n[2])).multiply(new I(Math.sqrt(.5),-Math.sqrt(.5),0,0)),o=e.orientation?-e.orientation*Math.PI/180/2:0,n=n.multiply(new I(Math.cos(o),0,-Math.sin(o),0)).toEulerAngles(),"number"==typeof ye&&10>ye?ye+=1:10===ye?(we=n[2]/Math.PI*180+V.yaw,ye=!0,requestAnimationFrame(L)):(V.pitch=n[0]/Math.PI*180,V.roll=-n[1]/Math.PI*180,V.yaw=-n[2]/Math.PI*180+we)}function A(){if(V.sceneFadeDuration&&K.fadeImg!==n){K.fadeImg.style.opacity=0;var e=K.fadeImg;delete K.fadeImg,setTimeout((function(){Le.removeChild(e),Z("scenechangefadedone")}),V.sceneFadeDuration)}Ne.style.display=V.compass?"inline":"none",Re||(V.hotSpots?(V.hotSpots=V.hotSpots.sort((function(e,t){return e.pitch<t.pitch})),V.hotSpots.forEach(O)):V.hotSpots=[],Re=!0,V.hotSpots.forEach(D)),Ae.load.box.style.display="none",J!==n&&(Le.removeChild(J),J=n),$=!0,Z("load"),C()}function O(e){e.pitch=Number(e.pitch)||0,e.yaw=Number(e.yaw)||0;var n=t.createElement("div");n.className="pnlm-hotspot-base",n.className=e.cssClass?n.className+" "+e.cssClass:n.className+" pnlm-hotspot pnlm-sprite pnlm-"+q(e.type);var o,a=t.createElement("span");if(e.text&&(a.innerHTML=q(e.text)),e.video){o=t.createElement("video");var i=e.video;V.basePath&&!r(i)&&(i=V.basePath+i),o.src=j(i),o.controls=!0,o.style.width=e.width+"px",Le.appendChild(n),a.appendChild(o)}else if(e.image){i=e.image,V.basePath&&!r(i)&&(i=V.basePath+i),(o=t.createElement("a")).href=j(e.URL?e.URL:i,!0),o.target="_blank",a.appendChild(o);var s=t.createElement("img");s.src=j(i),s.style.width=e.width+"px",s.style.paddingTop="5px",Le.appendChild(n),o.appendChild(s),a.style.maxWidth="initial"}else if(e.URL){if((o=t.createElement("a")).href=j(e.URL,!0),e.attributes)for(i in e.attributes)o.setAttribute(i,e.attributes[i]);else o.target="_blank";Le.appendChild(o),n.className+=" pnlm-pointer",a.className+=" pnlm-pointer",o.appendChild(n)}else e.sceneId&&(n.onclick=n.ontouchend=function(){return n.clicked||(n.clicked=!0,Y(e.sceneId,e.targetPitch,e.targetYaw,e.targetHfov)),!1},n.className+=" pnlm-pointer",a.className+=" pnlm-pointer"),Le.appendChild(n);e.createTooltipFunc?e.createTooltipFunc(n,e.createTooltipArgs):(e.text||e.video||e.image)&&(n.classList.add("pnlm-tooltip"),n.appendChild(a),a.style.width=a.scrollWidth-20+"px",a.style.marginLeft=-(a.scrollWidth-n.offsetWidth)/2+"px",a.style.marginTop=-a.scrollHeight-12+"px"),e.clickHandlerFunc&&(n.addEventListener("click",(function(t){e.clickHandlerFunc(t,e.clickHandlerArgs)}),"false"),n.className+=" pnlm-pointer",a.className+=" pnlm-pointer"),e.div=n}function D(e){var t=Math.sin(e.pitch*Math.PI/180),n=Math.cos(e.pitch*Math.PI/180),o=Math.sin(V.pitch*Math.PI/180),a=Math.cos(V.pitch*Math.PI/180),i=Math.cos((-e.yaw+V.yaw)*Math.PI/180),r=t*o+n*i*a;if(90>=e.yaw&&-90<e.yaw&&0>=r||(90<e.yaw||-90>=e.yaw)&&0>=r)e.div.style.visibility="hidden";else{var s=Math.sin((-e.yaw+V.yaw)*Math.PI/180),l=Math.tan(V.hfov*Math.PI/360);e.div.style.visibility="visible";var c=(h=K.getCanvas()).clientWidth,h=h.clientHeight;t=[-c/l*s*n/r/2,-c/l*(t*a-n*i*o)/r/2],n=Math.sin(V.roll*Math.PI/180),o=Math.cos(V.roll*Math.PI/180);(t=[t[0]*o-t[1]*n,t[0]*n+t[1]*o])[0]+=(c-e.div.offsetWidth)/2,t[1]+=(h-e.div.offsetHeight)/2,c="translate("+t[0]+"px, "+t[1]+"px) translateZ(9999px) rotate("+V.roll+"deg)",e.scale&&(c+=" scale("+ne/V.hfov/r+")"),e.div.style.webkitTransform=c,e.div.style.MozTransform=c,e.div.style.transform=c}}function k(e){V={};var t,n,o="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");for(t in Me=[],Te)Te.hasOwnProperty(t)&&(V[t]=Te[t]);for(t in a.default)if(a.default.hasOwnProperty(t))if("strings"==t)for(n in a.default.strings)a.default.strings.hasOwnProperty(n)&&(V.strings[n]=q(a.default.strings[n]));else V[t]=a.default[t],0<=o.indexOf(t)&&Me.push(t);if(null!==e&&""!==e&&a.scenes&&a.scenes[e]){var i=a.scenes[e];for(t in i)if(i.hasOwnProperty(t))if("strings"==t)for(n in i.strings)i.strings.hasOwnProperty(n)&&(V.strings[n]=q(i.strings[n]));else V[t]=i[t],0<=o.indexOf(t)&&Me.push(t);V.scene=e}for(t in a)if(a.hasOwnProperty(t))if("strings"==t)for(n in a.strings)a.strings.hasOwnProperty(n)&&(V.strings[n]=q(a.strings[n]));else V[t]=a[t],0<=o.indexOf(t)&&Me.push(t)}function N(e){if((e=e||!1)&&"preview"in V){var o=V.preview;V.basePath&&!r(o)&&(o=V.basePath+o),(J=t.createElement("div")).className="pnlm-preview-img",J.style.backgroundImage="url('"+j(o).replace(/"/g,"%22").replace(/'/g,"%27")+"')",Le.appendChild(J)}o=V.title;var a=V.author;for(var s in e&&("previewTitle"in V&&(V.title=V.previewTitle),"previewAuthor"in V&&(V.author=V.previewAuthor)),V.hasOwnProperty("title")||(Ae.title.innerHTML=""),V.hasOwnProperty("author")||(Ae.author.innerHTML=""),V.hasOwnProperty("title")||V.hasOwnProperty("author")||(Ae.container.style.display="none"),De.load.innerHTML="<p>"+V.strings.loadButtonLabel+"</p>",Ae.load.boxp.innerHTML=V.strings.loadingLabel,V)if(V.hasOwnProperty(s))switch(s){case"title":Ae.title.innerHTML=q(V[s]),Ae.container.style.display="inline";break;case"author":var l=q(V[s]);V.authorURL&&((l=t.createElement("a")).href=j(V.authorURL,!0),l.target="_blank",l.innerHTML=q(V[s]),l=l.outerHTML),Ae.author.innerHTML=V.strings.bylineLabel.replace("%s",l),Ae.container.style.display="inline";break;case"fallback":(l=t.createElement("a")).href=j(V[s],!0),l.target="_blank",l.textContent="Click here to view this panorama in an alternative viewer.";var c=t.createElement("p");c.textContent="Your browser does not support WebGL.",c.appendChild(t.createElement("br")),c.appendChild(l),Ae.errorMsg.innerHTML="",Ae.errorMsg.appendChild(c);break;case"hfov":z(Number(V[s]));break;case"autoLoad":!0===V[s]&&K===n&&(Ae.load.box.style.display="inline",De.load.style.display="none",i());break;case"showZoomCtrl":De.zoom.style.display=V[s]&&0!=V.showControls?"block":"none";break;case"showFullscreenCtrl":De.fullscreen.style.display=V[s]&&0!=V.showControls&&("fullscreen"in t||"mozFullScreen"in t||"webkitIsFullScreen"in t||"msFullscreenElement"in t)?"block":"none";break;case"hotSpotDebug":Oe.style.display=V[s]?"block":"none";break;case"showControls":V[s]||(De.orientation.style.display="none",De.zoom.style.display="none",De.fullscreen.style.display="none");break;case"orientationOnByDefault":V[s]&&W()}e&&(o?V.title=o:delete V.title,a?V.author=a:delete V.author)}function U(){if($&&!pe)if(fe)t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen();else try{o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen?o.msRequestFullscreen():o.webkitRequestFullScreen()}catch(e){}}function F(e){t.fullscreenElement||t.fullscreen||t.mozFullScreen||t.webkitIsFullScreen||t.msFullscreenElement?(De.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),fe=!0):(De.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),fe=!1),"resize"!==e&&Z("fullscreenchange",fe),K.resize(),z(V.hfov),C()}function B(e){var t=V.minHfov;if("multires"==V.type&&K&&!V.multiResMinHfov&&(t=Math.min(t,K.getCanvas().width/(V.multiRes.cubeResolution/90*.9))),t>V.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),V.hfov;var n=V.hfov;n=e<t?t:e>V.maxHfov?V.maxHfov:e;return V.avoidShowingBackground&&K&&(e=K.getCanvas(),n=Math.min(n,360*Math.atan(Math.tan((V.maxPitch-V.minPitch)/360*Math.PI)/e.height*e.width)/Math.PI)),n}function z(e){V.hfov=B(e),Z("zoomchange",V.hfov)}function H(){xe={},be=V.autoRotate?V.autoRotate:be,V.autoRotate=!1}function G(){pe&&(Ae.load.box.style.display="none",Ae.errorMsg.style.display="none",pe=!1,Le.style.display="block",Z("errorcleared")),$=!1,De.load.style.display="none",Ae.load.box.style.display="inline",i()}function Y(e,t,o,i,r){var s,l;if($||(r=!0),$=!1,xe={},V.sceneFadeDuration&&!r&&(s=K.render(V.pitch*Math.PI/180,V.yaw*Math.PI/180,V.hfov*Math.PI/180,{returnImage:!0}))!==n)return(r=new Image).className="pnlm-fade-img",r.style.transition="opacity "+V.sceneFadeDuration/1e3+"s",r.style.width="100%",r.style.height="100%",r.onload=function(){Y(e,t,o,i,!0)},r.src=s,Le.appendChild(r),void(K.fadeImg=r);r="same"===t?V.pitch:t,s="same"===o?V.yaw:"sameAzimuth"===o?V.yaw+(V.northOffset||0)-(a.scenes[e].northOffset||0):o,l="same"===i?V.hfov:i,function(){var e=V.hotSpots;if(Re=!1,delete V.hotSpots,e)for(var t=0;t<e.length;t++){var n=e[t].div;if(n){for(;n.parentNode&&n.parentNode!=Le;)n=n.parentNode;Le.removeChild(n)}delete e[t].div}}(),k(e),ve.yaw=ve.pitch=ve.hfov=0,N(),r!==n&&(V.pitch=r),s!==n&&(V.yaw=s),l!==n&&(V.hfov=l),Z("scenechange",e),G()}function X(){e.removeEventListener("deviceorientation",S),De.orientation.classList.remove("pnlm-orientation-button-active"),ye=!1}function W(){"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(t){"granted"==t&&(ye=1,e.addEventListener("deviceorientation",S),De.orientation.classList.add("pnlm-orientation-button-active"))})):(ye=1,e.addEventListener("deviceorientation",S),De.orientation.classList.add("pnlm-orientation-button-active"))}function q(e){return a.escapeHTML?String(e).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(e).split("\n").join("<br>")}function j(e,t){try{var n=decodeURIComponent(function(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return"about:blank"}return 0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):t&&0===n.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):e}function Z(e){if(e in Ee)for(var t=Ee[e].length;0<t;t--)Ee[e][Ee[e].length-t].apply(null,[].slice.call(arguments,1))}var V,K,J,$,Q,ee,te,ne,oe,ae=this,ie=!1,re=Date.now(),se=0,le=0,ce=-1,he=0,ue=0,de=Array(10),fe=!1,pe=!1,me=!1,ve={yaw:0,pitch:0,hfov:0},ge=!1,ye=!1,we=0,be=0,xe={},Ee={},Me=[],Pe=!1,Re=!1,_e=!1,Te={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(e){return.5>e?2*e*e:(4-2*e)*e-1},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};(o="string"==typeof o?t.getElementById(o):o).classList.add("pnlm-container"),o.tabIndex=0;var Ce=t.createElement("div");Ce.className="pnlm-ui",o.appendChild(Ce);var Le=t.createElement("div");Le.className="pnlm-render-container",o.appendChild(Le);var Ie=t.createElement("div");Ie.className="pnlm-dragfix",Ce.appendChild(Ie);var Se=t.createElement("span");Se.className="pnlm-about-msg",Se.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a> 2.5.6',Ce.appendChild(Se),Ie.addEventListener("contextmenu",(function e(t){var n=c(t);Se.style.left=n.x+"px",Se.style.top=n.y+"px",clearTimeout(e.t1),clearTimeout(e.t2),Se.style.display="block",Se.style.opacity=1,e.t1=setTimeout((function(){Se.style.opacity=0}),2e3),e.t2=setTimeout((function(){Se.style.display="none"}),2500),t.preventDefault()}));var Ae={},Oe=t.createElement("div");Oe.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Ce.appendChild(Oe),Ae.container=t.createElement("div"),Ae.container.className="pnlm-panorama-info",Ae.title=t.createElement("div"),Ae.title.className="pnlm-title-box",Ae.container.appendChild(Ae.title),Ae.author=t.createElement("div"),Ae.author.className="pnlm-author-box",Ae.container.appendChild(Ae.author),Ce.appendChild(Ae.container),Ae.load={},Ae.load.box=t.createElement("div"),Ae.load.box.className="pnlm-load-box",Ae.load.boxp=t.createElement("p"),Ae.load.box.appendChild(Ae.load.boxp),Ae.load.lbox=t.createElement("div"),Ae.load.lbox.className="pnlm-lbox",Ae.load.lbox.innerHTML='<div class="pnlm-loading"></div>',Ae.load.box.appendChild(Ae.load.lbox),Ae.load.lbar=t.createElement("div"),Ae.load.lbar.className="pnlm-lbar",Ae.load.lbarFill=t.createElement("div"),Ae.load.lbarFill.className="pnlm-lbar-fill",Ae.load.lbar.appendChild(Ae.load.lbarFill),Ae.load.box.appendChild(Ae.load.lbar),Ae.load.msg=t.createElement("p"),Ae.load.msg.className="pnlm-lmsg",Ae.load.box.appendChild(Ae.load.msg),Ce.appendChild(Ae.load.box),Ae.errorMsg=t.createElement("div"),Ae.errorMsg.className="pnlm-error-msg pnlm-info-box",Ce.appendChild(Ae.errorMsg);var De={};De.container=t.createElement("div"),De.container.className="pnlm-controls-container",Ce.appendChild(De.container),De.load=t.createElement("div"),De.load.className="pnlm-load-button",De.load.addEventListener("click",(function(){N(),G()})),Ce.appendChild(De.load),De.zoom=t.createElement("div"),De.zoom.className="pnlm-zoom-controls pnlm-controls",De.zoomIn=t.createElement("div"),De.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",De.zoomIn.addEventListener("click",(function(){$&&(z(V.hfov-5),C())})),De.zoom.appendChild(De.zoomIn),De.zoomOut=t.createElement("div"),De.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",De.zoomOut.addEventListener("click",(function(){$&&(z(V.hfov+5),C())})),De.zoom.appendChild(De.zoomOut),De.container.appendChild(De.zoom),De.fullscreen=t.createElement("div"),De.fullscreen.addEventListener("click",U),De.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(t.fullscreenEnabled||t.mozFullScreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled)&&De.container.appendChild(De.fullscreen),De.orientation=t.createElement("div"),De.orientation.addEventListener("click",(function(e){ye?X():W()})),De.orientation.addEventListener("mousedown",(function(e){e.stopPropagation()})),De.orientation.addEventListener("touchstart",(function(e){e.stopPropagation()})),De.orientation.addEventListener("pointerdown",(function(e){e.stopPropagation()})),De.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var ke=!1;e.DeviceOrientationEvent&&"https:"==location.protocol&&0<=navigator.userAgent.toLowerCase().indexOf("mobi")&&(De.container.appendChild(De.orientation),ke=!0);var Ne=t.createElement("div");Ne.className="pnlm-compass pnlm-controls pnlm-control",Ce.appendChild(Ne),a.firstScene?k(a.firstScene):a.default&&a.default.firstScene?k(a.default.firstScene):k(null),N(!0);var Ue=[],Fe=[];I.prototype.multiply=function(e){return new I(this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z,this.x*e.w+this.w*e.x+this.y*e.z-this.z*e.y,this.y*e.w+this.w*e.y+this.z*e.x-this.x*e.z,this.z*e.w+this.w*e.z+this.x*e.y-this.y*e.x)},I.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean($)},this.getPitch=function(){return V.pitch},this.setPitch=function(e,t,o,a){return re=Date.now(),1e-6>=Math.abs(e-V.pitch)?("function"==typeof o&&o(a),this):((t=t==n?1e3:Number(t))?(xe.pitch={startTime:Date.now(),startPosition:V.pitch,endPosition:e,duration:t},"function"==typeof o&&setTimeout((function(){o(a)}),t)):V.pitch=e,C(),this)},this.getPitchBounds=function(){return[V.minPitch,V.maxPitch]},this.setPitchBounds=function(e){return V.minPitch=Math.max(-90,Math.min(e[0],90)),V.maxPitch=Math.max(-90,Math.min(e[1],90)),this},this.getYaw=function(){return(V.yaw+540)%360-180},this.setYaw=function(e,t,o,a){return re=Date.now(),1e-6>=Math.abs(e-V.yaw)?("function"==typeof o&&o(a),this):(e=(e+180)%360-180,(t=t==n?1e3:Number(t))?(180<V.yaw-e?e+=360:180<e-V.yaw&&(e-=360),xe.yaw={startTime:Date.now(),startPosition:V.yaw,endPosition:e,duration:t},"function"==typeof o&&setTimeout((function(){o(a)}),t)):V.yaw=e,C(),this)},this.getYawBounds=function(){return[V.minYaw,V.maxYaw]},this.setYawBounds=function(e){return V.minYaw=Math.max(-360,Math.min(e[0],360)),V.maxYaw=Math.max(-360,Math.min(e[1],360)),this},this.getHfov=function(){return V.hfov},this.setHfov=function(e,t,o,a){return re=Date.now(),1e-6>=Math.abs(e-V.hfov)?("function"==typeof o&&o(a),this):((t=t==n?1e3:Number(t))?(xe.hfov={startTime:Date.now(),startPosition:V.hfov,endPosition:B(e),duration:t},"function"==typeof o&&setTimeout((function(){o(a)}),t)):z(e),C(),this)},this.getHfovBounds=function(){return[V.minHfov,V.maxHfov]},this.setHfovBounds=function(e){return V.minHfov=Math.max(0,e[0]),V.maxHfov=Math.max(0,e[1]),this},this.lookAt=function(e,t,o,a,i,r){return a=a==n?1e3:Number(a),e!==n&&1e-6<Math.abs(e-V.pitch)&&(this.setPitch(e,a,i,r),i=n),t!==n&&1e-6<Math.abs(t-V.yaw)&&(this.setYaw(t,a,i,r),i=n),o!==n&&1e-6<Math.abs(o-V.hfov)&&(this.setHfov(o,a,i,r),i=n),"function"==typeof i&&i(r),this},this.getNorthOffset=function(){return V.northOffset},this.setNorthOffset=function(e){return V.northOffset=Math.min(360,Math.max(0,e)),C(),this},this.getHorizonRoll=function(){return V.horizonRoll},this.setHorizonRoll=function(e){return V.horizonRoll=Math.min(90,Math.max(-90,e)),K.setPose(V.horizonPitch*Math.PI/180,V.horizonRoll*Math.PI/180),C(),this},this.getHorizonPitch=function(){return V.horizonPitch},this.setHorizonPitch=function(e){return V.horizonPitch=Math.min(90,Math.max(-90,e)),K.setPose(V.horizonPitch*Math.PI/180,V.horizonRoll*Math.PI/180),C(),this},this.startAutoRotate=function(e,t){return e=e||be||1,t=t===n?oe:t,V.autoRotate=e,ae.lookAt(t,n,ne,3e3),C(),this},this.stopAutoRotate=function(){return be=V.autoRotate?V.autoRotate:be,V.autoRotate=!1,V.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){H(),ve={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return K},this.setUpdate=function(e){return Pe=!0===e,K===n?s():C(),this},this.mouseEventToCoords=function(e){return d(e)},this.loadScene=function(e,t,n,o){return!1!==$&&Y(e,t,n,o),this},this.getScene=function(){return V.scene},this.addScene=function(e,t){return a.scenes[e]=t,this},this.removeScene=function(e){return!(V.scene===e||!a.scenes.hasOwnProperty(e))&&(delete a.scenes[e],!0)},this.toggleFullscreen=function(){return U(),this},this.getConfig=function(){return V},this.getContainer=function(){return o},this.addHotSpot=function(e,t){if(t===n&&V.scene===n)V.hotSpots.push(e);else{var o=t!==n?t:V.scene;if(!a.scenes.hasOwnProperty(o))throw"Invalid scene ID!";a.scenes[o].hasOwnProperty("hotSpots")||(a.scenes[o].hotSpots=[],o==V.scene&&(V.hotSpots=a.scenes[o].hotSpots)),a.scenes[o].hotSpots.push(e)}return t!==n&&V.scene!=t||(O(e),$&&D(e)),this},this.removeHotSpot=function(e,t){if(t===n||V.scene==t){if(!V.hotSpots)return!1;for(var o=0;o<V.hotSpots.length;o++)if(V.hotSpots[o].hasOwnProperty("id")&&V.hotSpots[o].id===e){for(var i=V.hotSpots[o].div;i.parentNode!=Le;)i=i.parentNode;return Le.removeChild(i),delete V.hotSpots[o].div,V.hotSpots.splice(o,1),!0}}else{if(!a.scenes.hasOwnProperty(t))return!1;if(!a.scenes[t].hasOwnProperty("hotSpots"))return!1;for(o=0;o<a.scenes[t].hotSpots.length;o++)if(a.scenes[t].hotSpots[o].hasOwnProperty("id")&&a.scenes[t].hotSpots[o].id===e)return a.scenes[t].hotSpots.splice(o,1),!0}},this.resize=function(){K&&T()},this.isLoaded=function(){return $},this.isOrientationSupported=function(){return ke||!1},this.stopOrientation=function(){X()},this.startOrientation=function(){ke&&W()},this.isOrientationActive=function(){return Boolean(ye)},this.on=function(e,t){return Ee[e]=Ee[e]||[],Ee[e].push(t),this},this.off=function(e,t){if(!e)return Ee={},this;if(t){var n=Ee[e].indexOf(t);0<=n&&Ee[e].splice(n,1),0==Ee[e].length&&delete Ee[e]}else delete Ee[e];return this},this.destroy=function(){_e=!0,clearTimeout(te),K&&K.destroy(),me&&(t.removeEventListener("mousemove",f,!1),t.removeEventListener("mouseup",p,!1),o.removeEventListener("mozfullscreenchange",F,!1),o.removeEventListener("webkitfullscreenchange",F,!1),o.removeEventListener("msfullscreenchange",F,!1),o.removeEventListener("fullscreenchange",F,!1),e.removeEventListener("resize",T,!1),e.removeEventListener("orientationchange",T,!1),o.removeEventListener("keydown",E,!1),o.removeEventListener("keyup",P,!1),o.removeEventListener("blur",M,!1),t.removeEventListener("mouseleave",p,!1)),o.innerHTML="",o.classList.remove("pnlm-container")}}return{viewer:function(e,t){return new o(e,t)}}}(window,document)}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(()=>{"use strict";n(470);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,a,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return h(this,n)}}function h(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,window.Controller);var n,a,i,h=c(u);function u(){return r(this,u),h.apply(this,arguments)}return n=u,i=[{key:"targets",get:function(){return["pitch","yaw","scene"]}}],(a=[{key:"connect",value:function(){var e=this;setTimeout((function(){var t,n=e.data.get("name"),a=e.data.get("panorama"),i={title:"Редактор сцены",sceneId:"editor",type:"equirectangular",compass:!1,panorama:e.data.get("panorama")},r=pannellum.viewer(n,{type:"equirectangular",panorama:a,autoLoad:!0,firstScene:"editor",scenes:{editor:i}}),s=o(e.hotspots);try{var l=function(){var e=t.value;e.clickHandlerFunc=function(){window.location=e.route},r.addHotSpot(e,r.getScene())};for(s.s();!(t=s.n()).done;)l()}catch(e){s.e(e)}finally{s.f()}document.getElementById(n).addEventListener("contextmenu",(function(t){return e.openModal(t,r)}))}),200)}},{key:"openModal",value:function(e,n){var a=this,i=t(n.mouseEventToCoords(e),2);this.pitchTarget.value=i[0],this.yawTarget.value=i[1];var r=this.modal.firstElementChild.firstElementChild;this.application.getControllerForElementAndIdentifier(this.modal,"modal").open({title:this.data.get("title")||this.modal.dataset.modalTitle,submit:this.data.get("action"),params:this.data.get("params","[]")}),r.addEventListener("submit",(function(){var e,t=o(a.constructor.targets);try{for(t.s();!(e=t.n()).done;){var n=e.value;r.append(a["".concat(n,"Target")].cloneNode())}}catch(e){t.e(e)}finally{t.f()}}))}},{key:"modal",get:function(){return document.getElementById("screen-modal-".concat(this.data.get("modal")))}},{key:"hotspots",get:function(){return JSON.parse(this.data.get("hotspots"))}}])&&s(n.prototype,a),i&&s(n,i),u}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,window.Controller);var t,n,o,a=g(i);function i(){return p(this,i),a.apply(this,arguments)}return t=i,o=[{key:"targets",get:function(){return[]}}],(n=[{key:"connect",value:function(){}}])&&m(t.prototype,n),o&&m(t,o),i}();application.register("pnldbg",d),application.register("imgmap",b)})()})();